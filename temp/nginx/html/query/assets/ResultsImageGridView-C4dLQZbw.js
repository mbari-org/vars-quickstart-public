import{d as E,c as w,h as _,b as c,f as o,w as s,r as n,T as G,F as v,a as f,g as p,e as y,n as Y,i as x,o as r,z as $,t as h,s as L}from"./index-ps4APlwp.js";import{u as Q,M as j}from"./constants-Cf8BquGR.js";import{u as H}from"./vampire-squid-D7jZW1fw.js";import"./util-C7v2iPfJ.js";const J=["href"],K=["src"],W=E({__name:"ResultsImageGridView",setup(Z){const g=Q(),C=g.annotations,V=w(()=>C.filter(e=>e.images&&e.images.length>0)),a=_(null),B=_(0),b=_(0),d=_(4),S=w(()=>12/d.value),I=H();function N(e,t){e&&(a.value=e,B.value=t.clientX,b.value=t.clientY)}function z(){a.value=null}function R(e){return e.split(".").pop()}function T(e){return e.video_sequence_name?e.video_sequence_name:e.camera_platform?e.camera_platform:e.video_name?e.video_name:e.chief_scientist?e.chief_scientist:e.camera_platform??""}function q(e,t){return e.url?.localeCompare(t.url??"")??0}function A(e){e.video_uri&&e.index_recorded_timestamp&&I.api.findPreviewMediaByUriAndTimestamp(e.video_uri,e.index_recorded_timestamp).then(t=>{if(t.media&&t.media.uri){const m=t.seekTimeSeconds??0,i=`${t.media.uri}#t=${m}`;window.open(i,"_blank")?.focus()}})}function P(){return g.queryResults?.length>j}return(e,t)=>{const m=n("router-link"),i=n("v-col"),U=n("v-select"),k=n("v-row"),M=n("v-img"),O=n("v-lazy"),F=n("v-icon"),X=n("v-card-text"),D=n("v-card");return r(),c(v,null,[o(k,null,{default:s(()=>[o(i,null,{default:s(()=>[P()?(r(),f(m,{key:0,to:"/large-results-view"},{default:s(()=>[...t[1]||(t[1]=[p("Back to results table",-1)])]),_:1})):(r(),f(m,{key:1,to:"/results-table-view"},{default:s(()=>[...t[2]||(t[2]=[p("Back to results table",-1)])]),_:1}))]),_:1}),o(i,{cols:"2"},{default:s(()=>[o(U,{label:"Images per row",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),items:[1,2,3,4,6]},null,8,["modelValue"])]),_:1})]),_:1}),o(k,null,{default:s(()=>[(r(!0),c(v,null,y(V.value,l=>(r(),f(i,{key:l.row??1,class:"d-flex child-flex",cols:S.value},{default:s(()=>[o(D,{title:T(l),subtitle:l.index_recorded_timestamp??""},{default:s(()=>[o(O,null,{default:s(()=>[o(M,{src:l.image,"lazy-src":l.image,class:$({"highlight-overlay":a.value&&a.value!==l.image}),width:"500px","aspect-ratio":"1",contain:"",onClick:u=>N(l.image,u)},null,8,["src","lazy-src","class","onClick"])]),_:2},1024),o(X,null,{default:s(()=>[x("span",null,h(l.concept)+" | ",1),o(F,{size:"small",onClick:()=>A(l)},{default:s(()=>[...t[3]||(t[3]=[p("mdi-video",-1)])]),_:1},8,["onClick"]),(r(!0),c(v,null,y(l.images?.sort(q),u=>(r(),c("a",{key:u.url,href:u.url,target:"_blank"},h(R(u.url??".unknown")),9,J))),128))]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1032,["cols"]))),128))]),_:1}),o(G,null,{default:s(()=>[a.value?(r(),c("div",{key:0,class:"image-preview",onClick:z},[x("img",{src:a.value,alt:"Preview"},null,8,K)])):Y("",!0)]),_:1})],64)}}}),oe=L(W,[["__scopeId","data-v-26cee322"]]);export{oe as default};

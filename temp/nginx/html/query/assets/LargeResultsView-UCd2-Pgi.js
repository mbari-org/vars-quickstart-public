import{I as G,_ as H,S as J}from"./ImageThumbnail-DwtlDv3s.js";import{d as R,r as v,b as y,o as r,i as e,t as u,a as V,w as l,g as h,F as T,e as N,f as s,u as M,s as q,c as C,h as S,l as I,A as $,B as F,C as O,z as K,n as D}from"./index-ps4APlwp.js";import{a as W,b as E,u as Z,M as ee}from"./constants-Cf8BquGR.js";import{u as te}from"./vampire-squid-D7jZW1fw.js";import{S as ne}from"./StandardDetails-Dg-Jqks8.js";import"./util-C7v2iPfJ.js";import"./QueryRunner-BvdmagcV.js";const oe={class:"annotation-row"},ae={class:"nowrap"},se={class:"thumbnail",style:{"text-align":"right"}},le={class:"nowrap"},ie={class:"nowrap"},ue={class:"nowrap"},de={class:"nowrap"},re={class:"nowrap"},ce={class:"nowrap"},ve={class:"details-column"},me=R({__name:"FauxAnnotationRow",props:{annotation:{}},setup(i){const A=i,k=te();function g(m){m.video_uri&&m.index_recorded_timestamp&&k.api.findPreviewMediaByUriAndTimestamp(m.video_uri,m.index_recorded_timestamp).then(o=>{if(o.media&&o.media.uri){const p=o.seekTimeSeconds??0,_=`${o.media.uri}#t=${p}`;window.open(_,"_blank")?.focus()}})}return(m,o)=>{const p=v("v-icon"),_=v("v-tooltip"),f=v("v-chip");return r(),y("tr",oe,[e("td",ae,u(i.annotation.row),1),e("td",se,[i.annotation.image?(r(),V(G,{key:0,annotation:i.annotation},null,8,["annotation"])):(r(),V(p,{key:1,size:"small",class:"video-icon",onClick:o[0]||(o[0]=()=>g(A.annotation))},{default:l(()=>[...o[1]||(o[1]=[h("mdi-video",-1)])]),_:1}))]),e("td",le,u(i.annotation.concept),1),e("td",ie,u(i.annotation.video_sequence_name),1),e("td",ue,u(i.annotation.index_recorded_timestamp),1),e("td",de,u(i.annotation.observer),1),e("td",re,u(i.annotation.depth_meters),1),e("td",ce,[e("div",ve,[(r(!0),y(T,null,N(i.annotation?.details,(x,c)=>(r(),V(f,{key:c},{default:l(()=>[h(u(M(W)(x,40))+" ",1),s(_,{activator:"parent",location:"bottom"},{default:l(()=>[h(u(M(E)(x)),1)]),_:2},1024)]),_:2},1024))),128))])])])}}}),_e=q(me,[["__scopeId","data-v-acd6bae9"]]),pe={class:"annotation-table"},fe={class:"map-video-content"},ge={class:"controls"},be=["value"],we={class:"pagination"},he=["disabled"],xe=["max"],ye=["disabled"],ke={class:"data-table"},Se={class:"controls"},Ve=["value"],Ae={class:"pagination"},Ce=["disabled"],$e=["max"],Te=["disabled"],Ne=R({__name:"FauxAnnotationTable",props:{annotations:{}},setup(i){const A=i,k=C(()=>A.annotations.filter(a=>a.image!==void 0&&a.image!==null)),g=C(()=>f.value?k.value:A.annotations),m=C(()=>{if(_.value?.trim()==="")return g.value;{const a=_.value?.toLowerCase();return a?g.value.filter(t=>t.concept&&t.concept.toLowerCase().includes(a)||t.video_sequence_name&&t.video_sequence_name.toLowerCase().includes(a)||t.observer&&t.observer.toLowerCase().includes(a)||t.details&&t.details.some(P=>E(P).toLowerCase().includes(a))||t.index_recorded_timestamp&&t.index_recorded_timestamp.includes(a)):g.value}}),o=S(null);function p(a){o.value=a}const _=S(""),f=S(!1),x=[50,100,1e3],c=S(50),d=S(1),b=S(1),w=C(()=>Math.max(1,Math.ceil(m.value.length/c.value))),Q=C(()=>{const a=(d.value-1)*c.value,t=a+c.value;return m.value.slice(a,t)});function U(){d.value<w.value&&d.value++}function z(){d.value>1&&d.value--}function B(a){c.value=a,d.value=1,b.value=1}return I(m,()=>{d.value=1}),I(b,a=>{const t=Math.min(Math.max(1,a),w.value);d.value=t}),I(d,a=>{b.value!==a&&(b.value=a)}),(a,t)=>{const P=v("v-text-field"),L=v("v-col"),X=v("v-checkbox"),Y=v("v-row"),j=v("v-container");return r(),y("div",pe,[e("div",fe,[s(H,{hidden:"hidden","source-video-uri":o.value?.video_uri,"recorded-timestamp":o.value?.index_recorded_timestamp},null,8,["source-video-uri","recorded-timestamp"])]),e("h3",null,"Total Annotations: "+u(i.annotations.length)+" | Viewed Annotations: "+u(m.value.length),1),s(j,null,{default:l(()=>[s(Y,null,{default:l(()=>[s(L,{cols:"9"},{default:l(()=>[s(P,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=n=>_.value=n),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",clearable:"","single-line":"",density:"compact"},null,8,["modelValue"])]),_:1}),s(L,{cols:"3"},{default:l(()=>[s(X,{label:"Images only",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=n=>f.value=n),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e("div",ge,[e("label",null,[t[8]||(t[8]=h(" Page size: ",-1)),$(e("select",{"onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),onChange:t[3]||(t[3]=n=>B(c.value))},[(r(),y(T,null,N(x,n=>e("option",{key:n,value:n},u(n),9,be)),64))],544),[[F,c.value,void 0,{number:!0}]])]),e("div",we,[e("button",{onClick:z,disabled:d.value===1},"◀ Prev",8,he),t[9]||(t[9]=e("span",null,"Page",-1)),$(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>b.value=n),type:"number",min:"1",max:w.value,class:"page-input"},null,8,xe),[[O,b.value,void 0,{number:!0}]]),e("span",null,"/ "+u(w.value),1),e("button",{onClick:U,disabled:d.value===w.value},"Next ▶",8,ye)])]),e("table",ke,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"Row"),e("th",null,"Image"),e("th",null,"Concept"),e("th",null,"Video Sequence Name"),e("th",null,"Recorded Timestamp"),e("th",null,"Observer"),e("th",null,"Depth (m)"),e("th",null,"Details")])],-1)),e("tbody",null,[(r(!0),y(T,null,N(Q.value,n=>(r(),V(_e,{key:n.row,annotation:n,class:K({selected:n===o.value}),onClick:Re=>p(n)},null,8,["annotation","class","onClick"]))),128))])]),e("div",Se,[e("label",null,[t[11]||(t[11]=h(" Page size: ",-1)),$(e("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>c.value=n),onChange:t[6]||(t[6]=n=>B(c.value))},[(r(),y(T,null,N(x,n=>e("option",{key:n,value:n},u(n),9,Ve)),64))],544),[[F,c.value,void 0,{number:!0}]])]),e("div",Ae,[e("button",{onClick:z,disabled:d.value===1},"◀ Prev",8,Ce),t[12]||(t[12]=e("span",null,"Page",-1)),$(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>b.value=n),type:"number",min:"1",max:w.value,class:"page-input"},null,8,$e),[[O,b.value,void 0,{number:!0}]]),e("span",null,"/ "+u(w.value),1),e("button",{onClick:U,disabled:d.value===w.value},"Next ▶",8,Te)])])])}}}),Pe=q(Ne,[["__scopeId","data-v-b4c27015"]]),Ie={key:0,class:"divider"},Me=R({__name:"LargeResultsView",setup(i){const k=Z().annotations;function g(){return k.length<ee}return(m,o)=>{const p=v("router-link"),_=v("v-col"),f=v("v-row"),x=v("v-container");return r(),V(x,{fluid:"",style:{width:"100%"}},{default:l(()=>[s(ne,{summary:"About"},{default:l(()=>[...o[0]||(o[0]=[e("div",null," If you ended up on this page, you probably have a lot of data to display. To accommodate your glutinous thirst for information, we are disabling a few features so your browser can handle your request. You're welcome! ",-1)])]),_:1}),s(f,null,{default:l(()=>[s(_,null,{default:l(()=>[s(p,{to:"results-image-grid-view",class:"view-link"},{default:l(()=>[...o[1]||(o[1]=[h("View image grid",-1)])]),_:1}),o[4]||(o[4]=e("span",{class:"divider"},"|",-1)),s(p,{to:"results-summary-view",class:"view-link"},{default:l(()=>[...o[2]||(o[2]=[h("View summary",-1)])]),_:1}),g()?(r(),y("span",Ie,"|")):D("",!0),g()?(r(),V(p,{key:1,to:"results-table-view",class:"view-link"},{default:l(()=>[...o[3]||(o[3]=[h("View table",-1)])]),_:1})):D("",!0)]),_:1})]),_:1}),s(f,null,{default:l(()=>[s(Pe,{annotations:M(k)},null,8,["annotations"])]),_:1}),s(f,null,{default:l(()=>[s(J)]),_:1})]),_:1})}}}),De=q(Me,[["__scopeId","data-v-e5e4e553"]]);export{De as default};

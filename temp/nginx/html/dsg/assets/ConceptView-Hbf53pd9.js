import{u as A,c as R,i as D,C as W,l as G,e as q}from"./oni-D9YAfMKR.js";import{d as M,s as P,g,a as o,h as n,b as e,c as s,q as I,i as a,p as C,t as v,j as y,v as J,u as b,F as V,o as t,_ as B,l as f,x as S,n as U}from"./index-DTKMe9NA.js";import{d as K}from"./no-image-BFxib7fC.js";const Q={class:"small-text"},X={key:0},Y={key:1},Z={key:2},ee=M({__name:"ConceptImageCarousel",props:{concept:{}},setup(r){const l=r,m=A(),u=R(()=>l.concept?m.api.representativeImagesFor(l.concept,K):[]),_=P(0);return(h,c)=>{const N=o("v-img"),x=o("router-link"),d=o("v-col"),$=o("v-icon"),w=o("v-btn"),T=o("v-row"),i=o("v-container"),k=o("v-sheet"),L=o("v-overlay"),O=o("v-carousel-item"),E=o("v-carousel"),z=o("v-slide-group-item"),F=o("v-slide-group");return t(),g(i,{fluid:""},{default:n(()=>[e(E,{modelValue:_.value,"onUpdate:modelValue":c[1]||(c[1]=p=>_.value=p),"hide-delimiters":"",height:"400","show-arrows":"hover"},{default:n(()=>[(t(!0),s(V,null,I(b(u),(p,j)=>(t(),g(O,{key:j},{default:n(()=>[e(N,{src:p.url,class:"rounded-lg",contain:""},null,8,["src"]),e(L,{scrim:!1,"content-class":"w-100 h-100 d-flex flex-column align-center justify-space-between pointer-pass-through py-3",contained:"","model-value":"","no-click-animation":"",persistent:""},{default:n(()=>[e(k,{color:"#88888888",elevation:"2",border:"",rounded:"lg",class:"overlay"},{default:n(()=>[e(i,null,{default:n(()=>[e(T,null,{default:n(()=>[e(d,{cols:"10"},{default:n(()=>[a("div",Q,[p.caption?(t(),s("div",X,v(p.caption),1)):C("",!0),p.credit?(t(),s("div",Y,v(p.credit),1)):C("",!0),p.name!==r.concept.name?(t(),s("div",Z,[c[3]||(c[3]=y("Representative image using ",-1)),e(x,{to:{name:"view-concept",params:{concept:p.name}},class:"nav-link"},{default:n(()=>[y(v(p.name),1)]),_:2},1032,["to"])])):C("",!0)])]),_:2},1024),e(d,{cols:"2"},{default:n(()=>[e(w,{icon:"",size:"small",variant:"text",href:p.url,target:"_blank",onClick:c[0]||(c[0]=J(()=>{},["stop"]))},{default:n(()=>[e($,null,{default:n(()=>[...c[4]||(c[4]=[y("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),e(F,{modelValue:_.value,"onUpdate:modelValue":c[2]||(c[2]=p=>_.value=p),class:"mt-4","center-active":"","show-arrows":""},{default:n(()=>[(t(!0),s(V,null,I(b(u),(p,j)=>(t(),g(z,{key:"thumb-"+j,value:j},{default:n(()=>[e(N,{src:p.url,height:"100",width:"100",class:"mx-2 rounded thumbnail",cover:"",onClick:ge=>_.value=j},null,8,["src","onClick"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}}),ne=B(ee,[["__scopeId","data-v-ae6f9618"]]),te={class:"taxon-node"},oe={key:1,class:"rank"},le={key:0,class:"children"},H=1,ae=M({__name:"TaxonNode",props:{taxaNode:{},level:{}},setup(r){const l=r,m=f(()=>l.taxaNode?.children?.length||0),u=f(()=>l.taxaNode&&D(l.taxaNode)?"label-text taxa":"label-text");return(_,h)=>{const c=o("router-link"),N=o("TaxonNode",!0);return t(),s("div",te,[a("div",{class:"node-label",style:S({marginLeft:`${r.level*H}rem`})},[r.level>0?(t(),s("div",{key:0,class:"connector",style:S({left:`${H*-.5}rem`})},null,4)):C("",!0),e(c,{to:{name:"view-concept",params:{concept:r.taxaNode?.name}}},{default:n(()=>[a("span",{class:U(u.value)},v(r.taxaNode?.name),3)]),_:1},8,["to"]),r.taxaNode?.rank?(t(),s("span",oe," ("+v(r.taxaNode?.rank)+")",1)):C("",!0)],4),m.value?(t(),s("div",le,[(t(!0),s(V,null,I(r.taxaNode?.children,(x,d)=>(t(),g(N,{key:d,taxaNode:x,level:r.level+1},null,8,["taxaNode","level"]))),128))])):C("",!0)])}}}),re=B(ae,[["__scopeId","data-v-d376381f"]]),ce={class:"taxonomic-tree"},se=M({__name:"TaxonomicBranch",props:{taxaNode:{}},setup(r){const l=r;return(m,u)=>{const _=o("v-container");return t(),g(_,{class:"pa-4"},{default:n(()=>[a("div",ce,[e(re,{taxaNode:l.taxaNode,level:0},null,8,["taxaNode"])])]),_:1})}}}),ue=B(se,[["__scopeId","data-v-842e5185"]]),ie=["innerHTML"],de=["innerHTML"],_e=M({__name:"ReferenceSheet",props:{reference:{}},setup(r){const l=r,m=f(()=>{const _=l.reference.citation,h=/(https?:\/\/\S+)/g;return _.replace(h,c=>`<a href="${c}" target="_blank" rel="noopener noreferrer">${c}</a>`)}),u=f(()=>m.value.includes("https")||l.reference.doi===null||l.reference.doi===void 0||l.reference.doi===""||l.reference.doi.includes("placeholder")?"":`<a href="${l.reference.doi}" target="_blank" rel="noopener noreferrer">${l.reference.doi}</a>`);return(_,h)=>(t(),s("div",null,[a("span",{innerHTML:m.value},null,8,ie),h[0]||(h[0]=y()),u.value.length>0?(t(),s("span",{key:0,innerHTML:u.value},null,8,de)):C("",!0)]))}}),pe={class:"info-item"},me={class:"info-item"},ve={class:"info-item"},fe=["innerHTML"],he=["innerHTML"],xe=M({__name:"ConceptDescription",props:{conceptObject:{}},setup(r){const l=r,m=f(()=>new W(l.conceptObject)),u=f(()=>m.value.descriptions),_=f(()=>m.value.geographicInfo),h=f(()=>m.value.otherDescriptions),c=f(()=>`<a href="http://www.marinespecies.org/aphia.php?p=taxlist&tName=${encodeURIComponent(l.conceptObject.name)}">World Register of Marine Species (WoRMS)</a>`),N=f(()=>`<a href="https://www.ncbi.nlm.nih.gov/nuccore/?term=${encodeURIComponent(l.conceptObject.name)}">National Center for Biotechnology Information</a>`);return(x,d)=>{const $=o("v-col"),w=o("v-row"),T=o("v-container");return t(),g(T,null,{default:n(()=>[e(w,null,{default:n(()=>[e($,null,{default:n(()=>[d[0]||(d[0]=a("h2",null,"Description",-1)),a("div",null,[(t(!0),s(V,null,I(u.value,(i,k)=>(t(),s("div",{key:k},[a("p",pe,[a("strong",null,v(i.displayedName)+":",1),y(" "+v(i.linkValue),1)])]))),128))])]),_:1})]),_:1}),e(w,null,{default:n(()=>[e($,null,{default:n(()=>[d[1]||(d[1]=a("h2",null,"Geographic Information",-1)),a("div",null,[(t(!0),s(V,null,I(_.value,(i,k)=>(t(),s("div",{key:k},[a("p",me,[a("strong",null,v(i.displayedName)+":",1),y(" "+v(i.linkValue),1)])]))),128))])]),_:1})]),_:1}),e(w,null,{default:n(()=>[e($,null,{default:n(()=>[d[2]||(d[2]=a("h2",null,"Additional Information",-1)),a("div",null,[(t(!0),s(V,null,I(h.value,(i,k)=>(t(),s("div",{key:k},[a("p",ve,[a("strong",null,v(i.displayedName)+":",1),y(" "+v(i.linkValue),1)])]))),128))])]),_:1})]),_:1}),e(w,null,{default:n(()=>[e($,null,{default:n(()=>[d[3]||(d[3]=a("h2",null,"References",-1)),a("div",null,[(t(!0),s(V,null,I(G.sortBy(l.conceptObject.references,"citation"),(i,k)=>(t(),s("div",{key:k,class:"reference-item"},[e(_e,{reference:i},null,8,["reference"])]))),128)),a("div",{innerHTML:c.value,class:"reference-item"},null,8,fe),a("div",{innerHTML:N.value,class:"reference-item"},null,8,he)])]),_:1})]),_:1})]),_:1})}}}),ke=B(xe,[["__scopeId","data-v-2be88352"]]),be=M({__name:"ConceptView",props:{concept:{}},setup(r){const l=r,m=A(),u=R(async()=>await m.api.findByConceptName(l.concept),null),_=f(()=>u.value&&D(u.value)?"taxa":""),h=f(()=>u.value?.alternateNames?.join(", ")??""),c=R(()=>m.api.buildTreeView(l.concept).then(N=>q(N)));return(N,x)=>{const d=o("v-card-title"),$=o("v-card-subtitle"),w=o("v-card"),T=o("v-col"),i=o("v-row"),k=o("router-link"),L=o("v-container"),O=o("v-progress-circular");return b(u)?(t(),g(L,{key:0},{default:n(()=>[e(i,null,{default:n(()=>[e(T,{cols:"7"},{default:n(()=>[e(w,{elevation:"0"},{default:n(()=>[e(d,null,{default:n(()=>[a("h1",{class:U(_.value)},v(b(u)?.name),3)]),_:1}),h.value?.length>0?(t(),g($,{key:0},{default:n(()=>[a("h2",null,"Alternate names: "+v(h.value),1),y(" Author: "+v(b(u)?.author),1)]),_:1})):C("",!0),e(ne,{concept:b(u)},null,8,["concept"])]),_:1})]),_:1}),e(T,{cols:"5"},{default:n(()=>[e(w,{elevation:"0"},{default:n(()=>[e(d,null,{default:n(()=>[...x[0]||(x[0]=[y("Taxonomy:",-1)])]),_:1}),b(c)?(t(),g(ue,{key:0,"taxa-node":b(c)},null,8,["taxa-node"])):C("",!0)]),_:1})]),_:1})]),_:1}),e(i,null,{default:n(()=>[e(T,{cols:"7"},{default:n(()=>[e(ke,{"concept-object":b(u)},null,8,["concept-object"])]),_:1}),e(T,{cols:"5"},{default:n(()=>[x[2]||(x[2]=a("h2",null,"Media",-1)),a("div",null,[e(k,{to:{name:"image-tree",params:{concept:l.concept}}},{default:n(()=>[...x[1]||(x[1]=[y("Phylogenetic Image Gallery",-1)])]),_:1},8,["to"])])]),_:1})]),_:1}),e(i)]),_:1})):(t(),g(L,{key:1},{default:n(()=>[e(O,{indeterminate:"",color:"primary"})]),_:1}))}}});export{be as default};
